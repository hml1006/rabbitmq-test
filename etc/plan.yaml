# 每项任务间隔, 确保上一项测试已经结束，服务器负载恢复正常
sleep: 0
# rabbitmq服务器地址
url: amqp://127.0.0.1:5672
# 日志服务器地址
log_server: http://127.0.0.1:8888
# 任务列表
task-list:
  -
    name: 测试11
    # 测试时长 秒
    time: 100
    # 生产者和消费者在不同机器上时，此参数生效
    routing-key: rmq.test.k
    # exchange
    exchange: rmq.test.ex
    # 消费者自动确认
    auto-ack: true
    # 一次确认多个消息
    multi-ack: 100
    # 持久化消息和队列
    persistent: false
    # 消息预取
    prefetch: 10000
    # 消费者速率 msg/s, 每个消费者都是这个速率
    consumer-rate: 0
    # 发送速率 msg/s，每个消费者都是这个速率
    producer-rate: 1000
    # 消息大小
    msg-size:
      -
        # 发送消息大小1000字节，持续发送5秒
        # 持续时间
        duration: 5
        size: 1000
      -
        duration: 10
        size: 2000
      -
        duration: 15
        size: 3000
    # 单个队列
    queue:
      # 队列名
      name: rmq.test.q
      # 生产者数量
      producter: 2
      # 消费者数量
      consumer: 4
  -
    name: 测试12
    time: 150
    exchange: rmq.test.ex
    routing-key: rmq.test.k
    # 消费者自动确认
    auto-ack: true
    # 一次确认多个消息
    multi-ack: 100
    # 持久化消息和队列
    persistent: false
    # 消息预取
    prefetch: 10000
    # 消费者速率 msg/s, 每个消费者都是这个速率
    consumer-rate: 0
    # 发送速率 msg/s，每个消费者都是这个速率
    producer-rate:
      - # 发送间隔5秒，发送速率 1000 msg/s
        duration: 5
        rate: 1000
    # 消息大小
    msg-size: 200
    # 多队列
    queue:
      # 队列生成规则，将从 perf-test-1 到perf-test-10
      pattern: rmq.test.q.%d
      from: 1
      to: 10
      # 生产者和消费者会均衡到所有队列
      # 总的生产者数量
      producter: 3
      # 总的消费者数量
      consumer: 5
